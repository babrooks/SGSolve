\hypertarget{pd_twostate_8cpp-example}{}\section{pd\+\_\+twostate.\+cpp}

\begin{DoxyCodeInclude}
\textcolor{comment}{// This file is part of the SGSolve library for stochastic games}
\textcolor{comment}{// Copyright (C) 2019 Benjamin A. Brooks}
\textcolor{comment}{// }
\textcolor{comment}{// SGSolve free software: you can redistribute it and/or modify it}
\textcolor{comment}{// under the terms of the GNU General Public License as published by}
\textcolor{comment}{// the Free Software Foundation, either version 3 of the License, or}
\textcolor{comment}{// (at your option) any later version.}
\textcolor{comment}{// }
\textcolor{comment}{// SGSolve is distributed in the hope that it will be useful, but}
\textcolor{comment}{// WITHOUT ANY WARRANTY; without even the implied warranty of}
\textcolor{comment}{// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU}
\textcolor{comment}{// General Public License for more details.}
\textcolor{comment}{// }
\textcolor{comment}{// You should have received a copy of the GNU General Public License}
\textcolor{comment}{// along with this program.  If not, see}
\textcolor{comment}{// <http://www.gnu.org/licenses/>.}
\textcolor{comment}{// }
\textcolor{comment}{// Benjamin A. Brooks}
\textcolor{comment}{// ben@benjaminbrooks.net}
\textcolor{comment}{// Chicago, IL}


\textcolor{preprocessor}{#include "sg.hpp"}

\textcolor{keywordtype}{int} main ()
\{
  \textcolor{keywordtype}{double} delta = 2.0/3.0;
  
  \textcolor{keywordtype}{int} action, state, player;
  \textcolor{keywordtype}{int} numPlayers = 2;
  \textcolor{keywordtype}{int} numStates = 2;

  vector<bool> unconstrained(2,\textcolor{keyword}{false});

  vector< vector< int > > numActions(numStates,vector<int>(numPlayers,2));
  vector<int> numActions\_total(numStates,4);

  \textcolor{comment}{// Payoffs}
  vector< vector< vector<double> > > 
    payoffs(numStates,vector< vector<double> >(4,vector<double>(numPlayers,0.0)));
  payoffs[0][0][0] = 0;
  payoffs[0][1][0] = -1;
  payoffs[0][2][0] = 2;
  payoffs[0][3][0] = 1;
  payoffs[0][0][1] = 0;
  payoffs[0][1][1] = 2;
  payoffs[0][2][1] = -1;
  payoffs[0][3][1] = 1;

  payoffs[1] = payoffs[0];
  payoffs[1][0][0] += 2;
  payoffs[1][1][0] += 2;
  payoffs[1][2][0] += 2;
  payoffs[1][3][0] += 2;
  payoffs[1][0][1] += 2;
  payoffs[1][1][1] += 2;
  payoffs[1][2][1] += 2;
  payoffs[1][3][1] += 2;
       
  \textcolor{comment}{// Transition probabilities}
  vector< vector< vector<double> > >
    probabilities(numStates,vector< vector<double> >(4,vector<double>(numStates,0.5)));

  probabilities[0][0][0] = 1.0/3.0; \textcolor{comment}{// Less likely to stay in same state if play same actions}
  probabilities[0][0][1] = 2.0/3.0;
  probabilities[0][3][0] = 1.0/3.0; 
  probabilities[0][3][1] = 2.0/3.0;
  probabilities[1][0][0] = 2.0/3.0; 
  probabilities[1][0][1] = 1.0/3.0;
  probabilities[1][3][0] = 2.0/3.0; 
  probabilities[1][3][1] = 1.0/3.0;

  \textcolor{keywordflow}{try}
    \{
      cout << \textcolor{stringliteral}{"Constructing game object"} << endl;
      \hyperlink{classSGGame}{SGGame} game(delta,
          numStates,
          numActions,
          payoffs,
          probabilities,
          unconstrained);

      \hyperlink{classSGEnv}{SGEnv} env;

      env.\hyperlink{classSGEnv_adfa101d39534519c80b33a78454b01e2}{setParam}(\hyperlink{namespaceSG_ac2f86c953fcec4419ac86538d9d314b6a6f4fbe86a6a2f1d02b2a3e0d5736e07e}{SG::DIRECTIONTOL},1e-12); 
      env.\hyperlink{classSGEnv_adfa101d39534519c80b33a78454b01e2}{setParam}(\hyperlink{namespaceSG_ac2f86c953fcec4419ac86538d9d314b6a4561058922699c51f1d044741ada7b96}{SG::NORMTOL},1e-12); 
      env.\hyperlink{classSGEnv_adfa101d39534519c80b33a78454b01e2}{setParam}(\hyperlink{namespaceSG_ac2f86c953fcec4419ac86538d9d314b6abb8cd6393db4d8b5d5651c4c6753a58a}{SG::LEVELTOL},1e-12); 
      env.\hyperlink{classSGEnv_adfa101d39534519c80b33a78454b01e2}{setParam}(\hyperlink{namespaceSG_ac2f86c953fcec4419ac86538d9d314b6ab2071ca7274b5bf75cb0cf39c2243c47}{SG::IMPROVETOL},1e-13); 

      cout << \textcolor{stringliteral}{"Building solver"} << endl;
      \hyperlink{classSGSolver__MaxMinMax}{SGSolver\_MaxMinMax} solver(env,game);

      cout << \textcolor{stringliteral}{"Starting solve routine"} << endl;
      solver.\hyperlink{classSGSolver__MaxMinMax_aad121e84c1492524e439ffba05893f3d}{solve}();

      \hyperlink{classSGSolution__MaxMinMax}{SGSolution\_MaxMinMax} soln = solver.\hyperlink{classSGSolver__MaxMinMax_ab8475d7043987a535dcadf3db3044aba}{getSolution}();
      
      cout << \textcolor{stringliteral}{"Saving data... "};
      \hyperlink{classSGSolution__MaxMinMax_a1965d607757c0b8be41f1a68f0d29438}{SGSolution\_MaxMinMax::save}(soln,\textcolor{stringliteral}{"sgtest.sln2"});
      cout << \textcolor{stringliteral}{"Done!"} << endl;

      \hyperlink{classSGGame_aaccf18a3663ec99360e5b6e64f2bf6e2}{SGGame::save}(game,\textcolor{stringliteral}{"pd.sgm"});

      ofstream ofs (\textcolor{stringliteral}{"pd\_twostate.log"});
      
      \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} iterit = soln.\hyperlink{classSGSolution__MaxMinMax_a9abb92b3922f47e9d9e659337cb987df}{getIterations}().cbegin();
       iterit != soln.\hyperlink{classSGSolution__MaxMinMax_a9abb92b3922f47e9d9e659337cb987df}{getIterations}().cend();
       iterit++)
    \{
      \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} state = 0; state < numStates; state++)
        \{
          \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} player = 0; player < numPlayers; player++)
        \{
          \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} stepit = iterit->getSteps().cbegin();
               stepit != iterit->getSteps().cend();
               stepit++)
            \{
              ofs << stepit->getPivot()[state][player] << \textcolor{stringliteral}{" "};
            \}
          ofs << endl;
        \} \textcolor{comment}{// for player}
        \} \textcolor{comment}{// for state}
    \} \textcolor{comment}{// for iter}
      ofs.close();

    \}
  \textcolor{keywordflow}{catch} (\hyperlink{classSGException}{SGException} e)
    \{
      cout << \textcolor{stringliteral}{"Caught the following exception:"} << endl
       << e.\hyperlink{classSGException_a5a43e290f591ee26d0674d3455f6c144}{what}() << endl;
    \}

  \textcolor{keywordflow}{return} 0;
\}
\end{DoxyCodeInclude}
 