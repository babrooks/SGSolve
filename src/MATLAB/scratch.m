
sgmex('IterToBeginning');
firstIter = sgmex('GetCurrentIteration');

numStates = sgmex('GetNumStates');
T=sgmex('GetTuples');
for s = 1:numStates
	plot(T(firstIter.numExtremeTuples:end,2*s-1),...
		T(firstIter.numExtremeTuples:end,2*s),'b-');
	hold on;
end


hold off;

%%


sgviewer('/home/babrooks/Dropbox/benshare/stochasticgames/code/examples/sgtest.dat');


%%
z=y;
zold = zeros(size(y));
for n=1:1000
    ztemp = z+X*(z-zold);
    zold = z;
    z=ztemp;
end
z

%%

BCE = [0.375;...
    0.361111;...
    0.354167;...
    0.35;...
    0.3375;...
    0.327168;...
    0.320742;...
    0.3162;...
    0.310309]
BOUND = [0.375;...
    0.3611111111111111;...
    0.3177083333333333;...
    0.3025;...
    0.2979166666666667;...
    0.2973639455782313;...
    0.2983816964285714;...
    0.2999834656084656;...
    0.2976349206349207];
vals = (2:10)';

plot(vals,BCE,'r',vals,BOUND,'b');
set(gca,'ylim',[0,1]);
legend('BCE','Bounds','location','northeast')

print('-dpdf','Y:\work\papers\correq\notes\fpamanyval\bounds\bounds_5-31-2013.pdf');


%% 
x = [0.242389880952381;...
0.2592150473114001;...
0.2674697699048129;...
0.2727093742315646;...
0.2763114206133488;...
0.2790420329600685;...
0.2812977238888408;...
0.2830636418063658;...
0.2846135468779103;...
0.2859009097563749;...
0.287062569621386;...
0.2880471196831855;...
0.288954688713882;...
0.289752077366828;...
0.2904785086822657;...
0.2911490238623875;...
0.2917512812883162;...
0.2923171202833005;...
0.2928348151408172;...
0.2933176864689094;...
0.2937631843943157;...
0.2941895782196386;...
0.2945825469406178;...
0.2949563949823427;...
0.2953074302544248;...
0.2956471735916552;...
0.295961134019492;...
0.2962587146898059;...
0.2965478323655262;...
0.2968202005356499;...
0.2980178720478134;...
0.2989990880612993;...
0.2998246289395823;...
0.3005356531177273;...
0.3011549540197623;...
0.3017058073450499];
x = [[(10:10:300)' ;(350:50:600)'] x];

plot(x(:,1),x(:,2))

%% BAB 5-18-2013
sospdf=@(k,n) 1./n^2+2*(n-k)./n^2;
fospdf=@(k,n) 1./n^2+2*(max(0,k-1))./n^2;
n=5;

expsos = 0;
expfos = 0;
prob = 0;

fprintf(1,'\n\n');
for k=1:n
    fprintf(1,'prob = %1.2f, val = %1.2f\n',sospdf(k,n),(k-1)/(n-1));
    expsos = expsos + sospdf(k,n)*(k-1)/(n-1);
    expfos = expfos + fospdf(k,n)*(k-1)/(n-1);
    prob = prob + fospdf(k,n);
end % for k

fprintf(1,'\nexpsos = %1.2f, expfos = %1.2f, probsum = %1.2f\n',expsos,expfos,prob);

fprintf(1,'\nrevenue at corner = %1.2f\n',(expfos-expsos)/2);

%% BAB 5-18-2013
p=1/6; pstar=1/2;
u=p+0.1;

bstar = 1-u/(pstar+p);

x1 = 0:0.001:bstar;
y1 = 2*p/pstar^2*x1.*(u-p+p*x1/2)./(1-x1).^2;
plot(x1,y1);



%% BAB 5-4-2013

numActionProfiles = [5 6 8 10];
numStates = numel(numActionProfiles);

bindingInfo = arrayfun(@(x) struct('action',num2cell(1:x),...
                                 'minIC',[],'bindingInfo', ...
                                   repmat({cell(1,2)},1,x)),numActionProfiles,...
                                 'uniformOutput',false)

